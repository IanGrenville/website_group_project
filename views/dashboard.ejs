<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="shortcut icon" href="https://www.cs.mcgill.ca/static/base/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/css/general.css">
    <link rel="stylesheet" href="/css/dashboard.css">
    <link rel="stylesheet" href="/css/themes.css">
    <title>CS Dasboard</title>

    <!-- the user 'admin' with password 'admin123' has a userType 1 and can access the full Dashboard -->
</head>

<body class=<%=theme%>>
    <%- include('partials/navbar', {logged, username : user.username}); %>

    <div id="content">
        <% if(user.userType>0) {  %> 
        <div id="center">
            <!-- Dashboard content -->

            <!-- Need to create a schema (and store it in the db) for the following elements : -->
            <!-- TA Posting, Awards,  News, Events, Posting, Technical Support -->

            <h1>Computer Science Website Administration</h1>

            <h2>Visitors</h2>

            <!-- What is a visitor Form ?-->
            <button class="general">Add a Visitor form</button>

            <hr>
            <h2 id="pageHeader">Data Modification</h2>

            <div class="row">
                <div class="col">
                    <h3>TA</h3>
                    <button class="general" <% if(user.userType>0) {%> onclick="toggleForm('TA')" <%}%> >Add Posting</button>
                    <button class="general"  <% if(user.userType>0) {%> onclick="toggleForm('Award')" <%}%>>Add Award Recipient</button><br>
                    
                    <select id="modAward" class="form-control"<% if(user.userType>0) {%> onchange="getPageSelected('modAward')" <%}%>>
                        <option>Modify Award Recipient</option>
                    </select>

                    <h3>Course</h3>
                    <button class="general"
                    <% if(user.userType>0) {%> onclick="toggleForm('Course')" <%}%>
                    >Add</button>
                    <br>

                    <select class="form-control" id="modCourse" <% if(user.userType>0) {%> onchange="getPageSelected('modCourse')" <%}%>>
                        <option>Modify Course</option> 
                    </select>

                    <h3> Posting</h3>
                    <button class="general"
                    <% if(user.userType>0) {%> onclick="toggleForm('Posting')" <%}%>
                    >Add</button>
                    <br>

                    <select class="form-control" id="modPosting"<% if(user.userType>0) {%> onchange="getPageSelected('modPosting')" <%}%>>
                        <option>Modify Posting</option>
                    </select> <br>

                </div>

                <div class="col">
                    <h3> News & Events</h3>
                    <button class="general"
                    <% if(user.userType>0) {%> onclick="toggleForm('News')" <%}%>
                    >Add News</button>
                    <br>

                    <select class="form-control" id="modNews" <% if(user.userType>0) {%> onchange="getPageSelected('modNews')" <%}%>>
                        <option>Modify News Story</option>
                    </select> <br>

                    <button class="general"
                    <% if(user.userType>0) {%> onclick="toggleForm('Event')" <%}%>
                    >Add Events</button>
                    <br>

                    <select class="form-control" id="modEvent" <% if(user.userType>0) {%> onchange="getPageSelected('modEvent')" <%}%>>
                        <option>Modify Events</option>
                    </select> <br>

                    <h3 class="mt-3"> Technical Report</h3>
                    <button class="general"
                    <% if(user.userType>0) {%> onclick="toggleForm('Tech')" <%}%>
                    >Add</button>
                    <br>

                    <select class="form-control" id="modTech" <% if(user.userType>0) {%> onchange="getPageSelected('modTech')" <%}%>>
                        <option>Modify Technical Support</option> 
                    </select> <br>
                </div>
            </div>
            <% if(user.userType>1) {  %>
                <hr>
                <div> Only a admin can see this</div>
            <% }  %>    
        </div>
        <% } else { %>
            Welcome <%= user.username %>
        <% }  %>

    </div>
    <!-- The forms will only be renderer if the user is of type 1 or above -->
    <!-- Make these async? Sends down a path and returns an answer which renders a message? Seem like the best idea! -->
    <!-- Make all the required fields required, e.prevent default the form -->
    <% if(user.userType>0) {  %> 
        <div id="form-wrap">
        <form id="TA" class="hidden" method="POST" onsubmit="handleRequest(event, $(this), 'POST', false)">
            <span id="closeIcon" onclick="toggleForm('TA', 'POST')">&times;</span>
            <h2 id="TAHeader">TA Posting</h2>
            <label for="courseTitle">Course:</label>
            <input type="text" id="courseTitle" name="courseTitle" placeholder="COMP XXX">
            <br>

            <label for="semester">Semester:</label>
            <select id="semester" name="semester">
                <option value='Winter 2021'>Winter 2021</option>
                <option value='Fall 2021'>Fall 2021</option>
                <option value='Winter 2022'>Winter 2022</option>
            </select> &emsp;

            <label for="spaces">Number of Vacancies:</label>
            <input name="spaces" id="spaces" type="number" min="1" max="100">
            <br>

            <label for="contact" class="p-3">Contact:</label>
            <input type="text" id="taContact" name="contact"
                placeholder="Person to contact for more information">
            <br>

            <label for="description">Description:</label> <br>

            <textarea id="taDescription" name="description" cols="60"
                placeholder="Short description of the posting"></textarea>
            <br>

            <input id="ta_id" name="_id" style="display:none;">
            <button class="general" type="submit">Submit</button>
        </form>

        <!-- Add Award -->
        <form id="Award" class="hidden" method="POST" onsubmit="handleRequest(event, $(this), 'POST', false)">
            <span id="closeIcon" onclick="toggleForm('Award', 'POST')">&times;</span>
            <h2 id="AwardHeader">Award</h2>

            <label for="title">Title:</label>
            <input type="text" id="awardTitle" name="title" placeholder="New Award for XX ">
            <br>

            <label for="date" class="pt-3">Date:</label>
            <input type="date" id="date" name="date" placeholder="YYYY-MM-DD" min="2020-12-01">

            <label for="recipient">Recipient:</label>
            <input type="text" id="recipient" name="recipient" placeholder="Recipient">
            <br>

            <label for="description">Description:</label><br>
            <textarea id="awardDescription" name="description" cols="60"
                placeholder="Short description"></textarea>
            <br>
            <br>
            <input id="a_id" name="_id" style="display:none;">
            <button class="general" type="submit">Submit</button>
        </form>

        <!-- Add News -->
        <form id="News" class="hidden" method="POST" onsubmit="handleRequest(event, $(this), 'POST', false)">
            <span id="closeIcon" onclick="toggleForm('News', 'POST')">&times;</span>
            <h2 id="NewsHeader">News</h2>
            <label for="type">News about:</label>
            <select id="newsType" name="type">
                <option value='faculty'>Faculty</option>
                <option value='lecturer'> Course Lecturer</option>
                <option value='research'> Research</option>
                <option value='student'> Student</option>
            </select>

            <label for="title">Title:</label>
            <input type="text" id="newsTitle" name="title" placeholder="Posting Available"> <br>

            <label for="contact" class="p-3">Contact:</label>
            <input type="text" id="newsContact" name="contact"
                placeholder="Person to contact for more information">
            <br>

            <label for="description">Description:</label>
            <br>
            <textarea id="newsDescription" name="description" cols="60"
                placeholder="Short description"></textarea>
            <br>
            <input id="n_id" name="_id" style="display:none;">
            <button class="general" type="submit">Add News</button>
        </form>

        <!-- Add Event -->
        <form id="Event" class="hidden" method="POST" onsubmit="handleRequest(event, $(this), 'POST', false)">
            <span id="closeIcon" onclick="toggleForm('Event', 'POST')">&times;</span>
            <h2 id="EventHeader">Event</h2>
            <label for="type">Event:</label>
            <select id="eventType" name="eventType">
                <option value='colloquium'>Colloquium</option>
                <option value='seminar'> Seminar</option>
                <option value='info-session'> Info Session</option>
                <option value='other'> Other</option>
            </select>

            <label for="title">Title:</label>
            <input type="text" id="eventTitle" name="title" placeholder="Posting Available">
            <br>

            <label for="startdate" class="pt-3">Start Date:</label>
            <input type="datetime-local" id="eventStartdate" name="start" min="2020-10-07T09:00">
            <br>

            <label for="enddate" class="pt-3">End date:</label>
            <input type="datetime-local" id="eventEnddate" name="end" min="2020-10-07T09:00">
            <br>

            <label for="host" class="p-3">Hosted By:</label>
            <input type="text" id="host" name="hostedBy" placeholder="Host">
            <br>

            <label for="description">Description:</label>
            <br>
            <textarea id="eventDescription" name="description" cols="60"
                placeholder="Description of the Event"></textarea>
            <br>

            <input id="e_id" name="_id" style="display:none;">
            <button class="general" type="submit">Event</button>
        </form>

        <!-- Add Course -->
        <form id="Course" class="hidden" method="POST" onsubmit="handleRequest(event, $(this), 'POST', true)">
            <span id="closeIcon" onclick="toggleForm('Course'), 'POST'">&times;</span>
            <h2 id="CourseHeader">Course</h2>

            <label for="title">Course:</label>
            <input type="text" id="title" name="title" placeholder="COMP XXX Introduction to YY">

            <label for="credits">Credits:</label>
            <input type="number" name="credits" id="credits" min="1" max="4">
            <br>

            Terms Offered : &emsp;&emsp;
            <input type="checkbox" id="w2021c" name="w2021" value="Winter 2021">
            <label for="w2021c"> Winter 2021</label> &emsp;&emsp;
            <input type="checkbox" id="s2021c" name="s2021" value="Summer 2021">
            <label for="s2021c"> Summer 2021</label>&emsp;&emsp;
            <input type="checkbox" id="f2021c" name="f2021" value="Fall 2021">
            <label for="f2021c"> Fall 2021</label>
            <br>

            <label for="instructors">Instructor(s):</label>
            <img id="plus" src="../images/icons/plus.png" alt="plus" onclick="addField()">
            <br>
            <span id="divInstr0">
                <input type="text" id="instructor0" name="instructor0"
                    placeholder="Name (optional : Semester)">
                <br>
            </span>

            <label for="calendar">McGill Ecalendar Link:</label>
            <input type="text" id="calendar" name="mcgillCalendar"
                placeholder="Paste the Ecalendar link of the course">
            <br>

            <label for="prerequisites">Prerequisites:</label> &emsp;&emsp;
            <label for="restrictions">Restrictions:</label>
            <br>
            <textarea id="prerequisites" name="prerequisites" cols="30"
                placeholder="Prerequisites"></textarea>
            &emsp;
            <textarea id="restrictions" name="restrictions" cols="30"
                placeholder="Restrictions"></textarea>
            <br>

            <label for="description">Description:</label>
            <br>
            <textarea id="description" name="description" cols="60"
                placeholder="Description of the Course"></textarea>
            <br>

            <label for="syllabus">Syllabus:</label>
            <input type="file" name="syllabus">
            <br>
            <input id="c_id" name="_id" style="display:none;">
            <button class="general" type="submit">Submit</button>
        </form>

        <!-- Add Technical Support -->
        <form id="Tech" class="hidden" method="POST" onsubmit="handleRequest(event, $(this), 'POST', false)">
            <span id="closeIcon" onclick="toggleForm('Tech', 'POST')">&times;</span>
            <h2 id='TechHeader'>Technical Report</h2>

            <label for="title" class="p-3">Title:</label>
            <input type="text" id="techTitle" name="title" placeholder="Title">
            <br>

            <label for="contact">Contact:</label>
            <input type="text" id="techContact" name="contact" placeholder="Enter an email">
            <br>

            <label for="description">Description:</label>
            <br>
            <textarea id="techDescription" name="description" cols="60" placeholder="Report"></textarea>
            <br>
            <input id="tech_id" name="_id" style="display:none;">
            <button class="general" type="submit">Submit</button>
        </form>

        <!-- Add Posting -->
        <form id="Posting" class="hidden" method="POST" onsubmit="handleRequest(event, $(this), 'POST', false)">
            <span id="closeIcon" onclick="toggleForm('Posting', 'POST')">&times;</span>
            <h2 id='PostingHeader'> Add Posting</h2>
            <label for="type">Posting for:</label>
            <select id="postingType" name="type">
                <option value='faculty'>Faculty</option>
                <option value='lecturer'> Course Lecturer</option>
                <option value='research'> Research</option>
                <option value='student'> Student</option>
            </select>

            <label for="title">Title:</label>
            <input type="text" id="postingTitle" name="title" placeholder="Posting Available">
            <br>

            <label for="date" class="pt-3">Start date:</label>
            <input type="date" id="postingStartdate" name="startdate" placeholder="YYYY-MM-DD"
                min="2020-12-01">

            <label for="date" class="pt-3">End date:</label>
            <input type="date" id="postingEnddate" name="enddate" placeholder="YYYY-MM-DD"
                min="2020-12-01">
            <br>

            <label for="contact" class="p-3">Contact:</label>
            <input type="text" id="postingContact" name="contact"
                placeholder="Person to contact for more information">
            <br>

            <label for="description">Description:</label>
            <br>
            <textarea id="postingDescription" name="description" cols="60"
                placeholder="Short description of the posting"></textarea>
            <br>
            <input id="p_id" name="_id" style="display:none;">
            <button class="general" type="submit">Submit</button>
        </form>
    </div>

    <% }  %>
    <%- include('partials/footer'); %>

</body>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
    integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
    crossorigin="anonymous"></script>
    <script src="/js/navbar.js"></script>

<% if(user.userType>0) {%>
    <script src='/js/frontendAPI.js'></script>
    <script src='/js/dashboard.js'></script>
    <% }  %>